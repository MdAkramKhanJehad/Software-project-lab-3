{% extends 'base.html' %}

{% block title %}Search{% endblock title %}

{% comment %} {% block stylesheet %}

    {% load static %}
    <link id="pagestyle" href="{% static 'style_search_page.css' %}" type="text/css" rel="stylesheet" />

{% endblock stylesheet %}  {% endcomment %}

{% block body %}

    <div class="container row w-100 min-vh-100 h-100 m-auto mt-4 p-5 shadow-lg">
      <div class="col">
        <div class="row">
          <div class="col d-flex flex-column justify-content-center">

            <div class="btn-group ms-5 text-center" id="btn-group" role="group" aria-label="Basic radio toggle button group">
              <div class="col-5 text-end">
                <input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" value="Search by User Id" checked>
                <label class="btn btn-outline-success" for="btnradio1">Search by User Id</label>
              </div>
              
              <div class="col-5 ms-2 text-start">
                <input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off" value="Search by Device Name" >
                <label class="btn btn-outline-success" for="btnradio2">Search by Device Name</label>
              </div>
              
            </div> 

            {% comment %} <div class="w-100 justify-content-center text-center">          
              <div class="text-center">
                {% csrf_token %}
                <div class="row w-100 shadow mt-3 mx-auto" style="height: 50px;">
                  <input type="text" class="form-control rounded border-success" name="query" id="query" placeholder="Enter user ID or device name">
                </div>
                <div class="pt-2 ">
                  <button type="submit" class="btn bg-success routine-search-btn btn-outline-success shadow text-light" onclick="searchRoutine()" style="font-size:120%;  width:auto;"><b>Search</b></button>
                </div>
              </div>
            </div>  {% endcomment %}

            <form class="w-100 justify-content-center" name="myform" method="GET" action="{% url 'search' %}">          
              <div class="text-center">
                <div class="row w-100 shadow mt-3 mx-auto" style="height: 50px;">
                  <input type="text" class="form-control rounded border-success" name="query" id="query" placeholder="Enter user ID or device name">
                </div>

                <div class="row " style="display:none;">
                  <input type="text" class="form-control rounded border-success" name="search-type" id="search-type">
                </div>

                <div class="pt-2 ">
                  <button type="submit" class="btn bg-success routine-search-btn btn-outline-success shadow text-light " style="font-size:120%;  width:auto;"><b>Search</b></button>
                </div>
              </div>
            </form> 

          </div>
        </div> 

        <div class="row pt-3 px-5">
          {% if created_routines %}
            <h4 class="text-center pb-2">Search result for query "{{user_id}}"</h4>
            {% for routine in created_routines %}
              <div class="row" >
                <div class="col">
                  <p class="routine1 fs-5" id="routine-{{forloop.counter}}" style="width: 105%;" >{{forloop.counter}}. If {{routine.trigger}}, then {{routine.action}}</p>
                </div>
              </div><br>
            {% endfor %}
          {% endif %}
        </div>
      </div>
    </div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    {% load static %}
    <script src="{% static 'search_page_script.js' %}"></script>
{% endblock body %}
